<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Fiole de Versets — Mood → Verset</title>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&family=Amiri&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg: #f7f8fc;
      --card: #ffffff;
      --text: #2b2d42;
      --muted: #6b6f86;
      --shadow: 0 12px 30px rgba(0,0,0,0.08);
      --glass: rgba(255,255,255,0.6);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
      background: linear-gradient(145deg,var(--bg),#eef2ff);
      font-family: 'Nunito', system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
      color:var(--text);
    }

    .app{
      width:100%;
      max-width:920px;
      background:var(--card);
      border-radius:22px;
      box-shadow:var(--shadow);
      overflow:hidden;
      border:1px solid #edf2ff;
    }

    header{
      padding:28px 28px 10px;
      text-align:center;
      background:
        radial-gradient(1100px 500px at 10% -10%, #98b7ff 0%, transparent 60%),
        radial-gradient(1100px 500px at 90% -10%, #ffd6e7 0%, transparent 60%);
    }
    header h1{ margin:0; font-size:28px; font-weight:800; }
    header p{ margin:8px 0 18px; color:var(--muted); }

    .controls{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      padding:0 24px 18px;
      justify-content:center;
      align-items:center;
    }
    .input, select{
      background:#f7f9ff;
      border:1px solid #e6ebff;
      border-radius:14px;
      padding:12px 14px;
      font-size:15px;
      color:var(--text);
      outline:none;
    }
    .input{ flex:1 1 260px; min-width:200px; }
    select{ flex:0 1 220px; }

    .btn{
      background:linear-gradient(180deg,#a7c0ff,#8fb2ff);
      color:white;
      border:none;
      border-radius:14px;
      padding:12px 18px;
      font-weight:700;
      cursor:pointer;
      box-shadow:0 8px 16px rgba(152,183,255,0.35);
      transition:transform .06s ease;
    }
    .btn:hover{ transform:translateY(-1px); }
    .btn:active{ transform:translateY(0); }

    .card{
      margin:0 24px 24px;
      padding:18px;
      border-radius:18px;
      background:#fbfdff;
      border:1px solid #eef2ff;
      text-align:center;
    }
    .card h3{ margin:10px 0 6px; font-size:18px; color:#4a4f68; }

    /* zone fiole */
    .bottle-area{
      display:flex;
      gap:20px;
      align-items:center;
      justify-content:center;
      flex-wrap:wrap;
      padding:12px 8px 0;
    }

    .fiole-wrap{
      position:relative;
      width:220px;
      height:260px;
      display:flex;
      align-items:center;
      justify-content:center;
      margin:6px auto;
    }

    /* glow behind bottle that changes color */
    .bottle-glow{
      position:absolute;
      inset:0;
      border-radius:28px;
      filter: blur(18px);
      opacity:0;
      transition:opacity .45s ease, background-color .45s ease, transform .45s ease;
      transform: scale(.9);
      pointer-events:none;
    }

    .fiole {
      width:160px;
      height:auto;
      cursor:pointer;
      transition: transform .45s cubic-bezier(.2,.9,.3,1), filter .35s ease;
      will-change:transform;
      z-index:2;
      user-select:none;
      -webkit-user-drag:none;
    }
    .fiole.open {
      transform: rotate(12deg) scale(1.18);
      filter: drop-shadow(0 18px 30px rgba(0,0,0,0.12));
    }

    /* small sparkle animation */
    .sparkle {
      position:absolute;
      width:10px; height:10px;
      border-radius:50%;
      background:rgba(255,255,255,0.9);
      top:18%; left:70%;
      opacity:0; transform:scale(.6);
      animation: sparkle 1s ease forwards;
      z-index:3;
      pointer-events:none;
    }
    @keyframes sparkle {
      0%{ opacity:0; transform:scale(.6) translateY(0); }
      30%{ opacity:1; transform:scale(1.1) translateY(-6px); }
      100%{ opacity:0; transform:scale(.6) translateY(-18px); }
    }

    .verse{
      margin-top:14px;
      padding:16px;
      border-radius:16px;
      background:#ffffff;
      border:1px dashed #dfe6ff;
      display:grid;
      gap:10px;
      text-align:left;
    }
    .arabic{
      font-family:'Amiri', serif;
      font-size:22px;
      line-height:1.6;
      direction:rtl;
      text-align:right;
      color:#1f2a44;
    }
    .ref{ font-size:13px; color:#7a7f95; }
    .summary{ font-size:15px; color:#2b2d42; }

    .footer{
      padding:14px 24px 24px;
      text-align:center;
      color:var(--muted);
      font-size:13px;
    }

    /* mood color classes for glow and verse background */
    .mood-heureux { --mood:#FFD966; }
    .mood-triste { --mood:#6FA8DC; }
    .mood-stresse { --mood:#C27BA0; }
    .mood-anxieux { --mood:#9FC5E8; }
    .mood-motive { --mood:#93C47D; }
    .mood-perdu { --mood:#B4A7D6; }
    .mood-reconnaissant { --mood:#F9CB9C; }
    .mood-colere { --mood:#F28B82; }
    .mood-fatigue { --mood:#B7B7FF; }
    .mood-humble { --mood:#DDEBF7; }

    /* apply mood color to glow and verse border */
    .bottle-glow.active { opacity:1; transform:scale(1); }
    .verse.mood { border-color: rgba(0,0,0,0.06); }

    /* responsive */
    @media (max-width:720px){
      .fiole-wrap{ width:180px; height:220px; }
      .fiole{ width:140px; }
    }
  </style>
</head>
<body>
  <main class="app" role="main" aria-label="Application versets selon humeur">
    <header>
      <h1>Verset selon ton humeur car [En effet, Nous avons rendu le Coran facile pour la médiation . Y a-t-il quelqu'un pour réfléchir?
 54:17] </h1>
      <p>Choisis une humeur ou écris la tienne, puis clique sur la fiole pour révéler un verset</p>
    </header>

    <section class="controls" aria-label="Contrôles">
      <select id="moodSelect" aria-label="Sélection d'humeur">
        <option value="">— Sélectionne une humeur —</option>
        <option value="heureux">Heureux(se)</option>
        <option value="triste">Triste</option>
        <option value="stresse">Stressé(e)</option>
        <option value="anxieux">Anxieux(se)</option>
        <option value="motive">Motivé(e)</option>
        <option value="perdu">Perdu(e)</option>
        <option value="reconnaissant">Reconnaissant(e)</option>
        <option value="colere">En colère</option>
        <option value="fatigue">Fatigué(e)</option>
        <option value="humble">Humble</option>
      </select>

      <input id="moodInput" class="input" type="text" placeholder="Ou écris ton humeur…" />
      <button id="showBtn" class="btn">Afficher un verset</button>
    </section>

    <section class="card" aria-live="polite">
      <h3 id="moodTitle">Choisis une humeur pour recevoir un verset • بسم الله</h3>

      <div class="bottle-area" aria-hidden="false">
        <div class="fiole-wrap" role="button" aria-label="Fiole magique" tabindex="0">
          <div id="bottleGlow" class="bottle-glow" aria-hidden="true"></div>

          <!-- Image de la fiole (remplace par ton image Minecraft-style) -->
          <img id="bottleImg" class="fiole" src="FIOLE.jpg" alt="Fiole magique" draggable="false" />

          <!-- sparkle placeholder -->
          <div id="sparkle" class="sparkle" style="display:none;"></div>
        </div>
      </div>

      <div id="verseBox" class="verse" hidden>
        <div class="ref" id="ref">Sourate — Verset</div>
        <div class="arabic" id="arabic">—</div>
        <div class="summary" id="summary">—</div>
      </div>
    </section>

    <div class="footer">
      Qu'Allah vous bénisse et vous accorde la paix!
    </div>
  </main>
 <script>

    /* ---------------------------
       Verset data structure
       - add or modify versets here
       --------------------------- */
       const VERSETS = {
  "heureux": [
    {ref:"Sourate 55:13", arabic:"فَبِأَيِّ آلَاءِ رَبِّكُمَا تُكَذِّبَانِ", summary:"Lequel donc des bienfaits de votre Seigneur nierez-vous ?"},
    {ref:"Sourate 16:18", arabic:"وَإِن تَعُدُّوا نِعْمَةَ اللَّهِ لَا تُحْصُوهَا إِنَّ اللَّهَ لَغَفُورٌ رَّحِيمٌ", summary:"Et si vous comptiez les bienfaits d’Allah, vous ne sauriez les dénombrer. Allah est certes Pardonneur et Miséricordieux."},
    {ref:"Sourate 14:7", arabic:"لَئِن شَكَرْتُمْ لَأَزِيدَنَّكُمْ", summary:"Si vous êtes reconnaissants, très certainement J’augmenterai pour vous."},
    {ref:"Sourate 2:152", arabic:"فَاذْكُرُونِي أَذْكُرْكُمْ", summary:"Souvenez-vous de Moi, Je me souviendrai de vous."},
    {ref:"Sourate 110:3", arabic:"فَسَيَكْفِيكَهُمُ اللَّهُ", summary:"Allah te suffira contre eux."},
    {ref:"Sourate 16:114", arabic:"فَكُلُوا مِمَّا رَزَقَكُمُ اللَّهُ حَلَالًا طَيِّبًا", summary:"Mangez donc de ce qu’Allah vous a attribué de licite et de bon."},
    {ref:"Sourate 28:77", arabic:"وَابْتَغِ فِيمَا آتَاكَ اللَّهُ الدَّارَ الْآخِرَةَ", summary:"Et recherche à travers ce qu’Allah t’a donné la demeure dernière, et n’oublie pas ta part en cette vie."},
    {ref:"Sourate 92:5-7", arabic:"فَأَمَّا مَنْ أَعْطَىٰ وَاتَّقَىٰ • وَصَدَّقَ بِالْحُسْنَىٰ • فَسَنُيَسِّرُهُ لِلْيُسْرَىٰ", summary:"Quant à celui qui donne et craint Allah, et déclare véridique la meilleure récompense, Nous lui faciliterons la voie à la facilité."},
    {ref:"Sourate 54:54", arabic:"إِنَّ الْمُتَّقِينَ فِي جَنَّاتٍ وَنَهَرٍ", summary:"Les pieux seront dans des Jardins et des ruisseaux."}
  ],

  "triste": [
    {ref:"Sourate 94:5-6", arabic:"فَإِنَّ مَعَ الْعُسْرِ يُسْرًا • إِنَّ مَعَ الْعُسْرِ يُسْرًا", summary:"Certes, à côté de la difficulté est une facilité."},
    {ref:"Sourate 2:286a", arabic:"لَا يُكَلِّفُ اللَّهُ نَفْسًا إِلَّا وُسْعَهَا", summary:"Allah n’impose à aucune âme une charge supérieure à sa capacité."},
    {ref:"Sourate 94:7-8", arabic:"فَإِذَا فَرَغْتَ فَانصَبْ", summary:"Quand tu te libères, alors lève-toi [à l’adoration]. Et vers ton Seigneur aspire."},
    {ref:"Sourate 95:4", arabic:"لَقَدْ خَلَقْنَا الْإِنسَانَ فِي أَحْسَنِ تَقْوِيمٍ", summary:"Nous avons certes créé l’homme dans la forme la plus parfaite."},
    {ref:"Sourate 3:139", arabic:"فَلَا تَهِنُوا وَلَا تَحْزَنُوا", summary:"Ne faiblissez pas et ne vous affligez pas alors que vous êtes les supérieurs si vous êtes croyants."},
    {ref:"Sourate 39:53", arabic:"لَا تَقْنَطُوا مِن رَّحْمَةِ اللَّهِ", summary:"Ne désespérez pas de la miséricorde d’Allah."},
    {ref:"Sourate 41:30", arabic:"إِنَّ الَّذِينَ قَالُوا رَبُّنَا اللَّهُ ثُمَّ اسْتَقَامُوا", summary:"Ceux qui disent : « Notre Seigneur est Allah », puis se tiennent sur le droit chemin."},
    {ref:"Sourate 2:286b", arabic:"رَبَّنَا لَا تُؤَاخِذْنَا إِن نَّسِينَا أَوْ أَخْطَأْنَا", summary:"Notre Seigneur ! Ne nous châtie pas s’il nous arrive d’oublier ou de commettre une erreur."},
    {ref:"Sourate 3:172", arabic:"وَمَن يَتَّقِ اللَّهَ يَجْعَل لَّهُ مَخْرَجًا", summary:"Et quiconque craint Allah, Il lui donnera une issue."},
    {ref:"Sourate 65:2-3", arabic:"وَمَن يَتَّقِ اللَّهَ يَجْعَل لَّهُ مِنْ أَمْرِهِ يُسْرًا • وَيَرْزُقْهُ مِنْ حَيْثُ لَا يَحْتَسِبُ", summary:"Et quiconque craint Allah, Il lui facilite les affaires et lui accorde une subsistance d’où il ne s’attend pas."},
    {ref:"Sourate 16:97", arabic:"وَمَنْ عَمِلَ صَالِحًا وَهُوَ مُؤْمِنٌ", summary:"Quiconque fait une bonne œuvre tout en étant croyant, Nous le ferons vivre d’une vie bonne."},
    {ref:"Sourate 93:4", arabic:"وَلَلْآخِرَةُ خَيْرٌ لَّكَ مِنَ الْأُولَىٰ", summary:"La vie dernière t’est certes meilleure que la première."},
    {ref:"Sourate 90:4", arabic:"لَقَدْ خَلَقْنَا الْإِنسَانَ فِي كَبَدٍ", summary:"Nous avons certes créé l’homme dans la souffrance."}
  ],

  "stresse": [
    {ref:"Sourate 13:28", arabic:"أَلَا بِذِكْرِ اللَّهِ تَطْمَئِنُّ الْقُلُوبُ", summary:"N’est-ce point par le rappel d’Allah que se tranquillisent les cœurs ?"},
    {ref:"Sourate 2:286c", arabic:"رَبَّنَا لَا تُؤَاخِذْنَا إِن نَّسِينَا", summary:"Notre Seigneur ! Ne nous châtie pas s’il nous arrive d’oublier."},
    {ref:"Sourate 94:5-6a", arabic:"فَإِنَّ مَعَ الْعُسْرِ يُسْرًا", summary:"Certes, à côté de la difficulté est une facilité."},
    {ref:"Sourate 94:7-8", arabic:"فَإِذَا فَرَغْتَ فَانصَبْ", summary:"Quand tu te libères, alors lève-toi [à l’adoration]. Et vers ton Seigneur aspire."},
    {ref:"Sourate 2:153", arabic:"اسْتَعِينُوا بِالصَّبْرِ وَالصَّلَاةِ", summary:"Cherchez secours dans la patience et la prière."},
    {ref:"Sourate 3:173", arabic:"حَسْبُنَا اللَّهُ وَنِعْمَ الْوَكِيلُ", summary:"Allah nous suffit; Il est le meilleur garant."},
    {ref:"Sourate 29:69", arabic:"وَالَّذِينَ جَاهَدُوا فِينَا", summary:"Ceux qui luttent pour Nous, Nous les guiderons."},
    {ref:"Sourate 47:7", arabic:"فَإِن تَنصُرُوا اللَّهَ يَنصُرْكُمْ", summary:"Si vous faites triompher Allah, Il vous fera triompher"}
]

              
   }  ;
    const MOOD_CLASS = {
      "heureux":"mood-heureux",
      "triste":"mood-triste",
      "stresse":"mood-stresse",
      "anxieux":"mood-anxieux",
      "motive":"mood-motive",
      "perdu":"mood-perdu",
      "reconnaissant":"mood-reconnaissant",
      "colere":"mood-colere",
      "fatigue":"mood-fatigue",
      "humble":"mood-humble"
    };

    // DOM refs
    const moodSelect = document.getElementById('moodSelect');
    const moodInput  = document.getElementById('moodInput');
    const showBtn    = document.getElementById('showBtn');
    const moodTitle  = document.getElementById('moodTitle');
    const verseBox   = document.getElementById('verseBox');
    const refEl      = document.getElementById('ref');
    const arabicEl   = document.getElementById('arabic');
    const summaryEl  = document.getElementById('summary');
    const bottleImg  = document.getElementById('bottleImg');
    const bottleGlow = document.getElementById('bottleGlow');
    const sparkleEl  = document.getElementById('sparkle');
    const fioleWrap  = document.querySelector('.fiole-wrap');

    // normalize helper
    function normalize(str){
      return (str||"").toLowerCase().trim()
        .replace(/[éèêë]/g,'e').replace(/[àâ]/g,'a').replace(/[îï]/g,'i')
        .replace(/[ôö]/g,'o').replace(/[ùûü]/g,'u').replace(/[^a-z0-9\s-]/g,'');
    }

    // pick mood key from input/select
    function resolveMood(){
      const fromSelect = moodSelect.value;
      const fromInput  = moodInput.value;
      let mood = normalize(fromInput || fromSelect);

      // normalize common variants
      if(mood.includes('heureux')) mood = 'heureux';
      if(mood.includes('trist')) mood = 'triste';
      if(mood.includes('stress') || mood.includes('stresse')) mood = 'stresse';
      if(mood.includes('anx')) mood = 'anxieux';
      if(mood.includes('mot')) mood = 'motive';
      if(mood.includes('perd')) mood = 'perdu';
      if(mood.includes('recon')) mood = 'reconnaissant';
      if(mood.includes('col') || mood.includes('colere')) mood = 'colere';
      if(mood.includes('fatig')) mood = 'fatigue';
      if(mood.includes('humble')) mood = 'humble';

      // fallback: if exact key exists, keep; else choose default 'motive'
      if(!Object.keys(VERSETS).includes(mood)) {
        // try inclusion match
        const found = Object.keys(VERSETS).find(k => k.includes(mood) || mood.includes(k));
        mood = found || 'motive';
      }
      return mood;
    }

    // pick random verse for mood
    function pickVerse(mood){
      const list = VERSETS[mood] || VERSETS['motive'];
      return list[Math.floor(Math.random()*list.length)];
    }

    // apply mood color to glow and verse
    function applyMoodVisuals(mood){
      // remove previous mood classes
      Object.values(MOOD_CLASS).forEach(c => {
        bottleGlow.classList.remove(c);
        verseBox.classList.remove(c);
      });

      const cls = MOOD_CLASS[mood] || MOOD_CLASS['motive'];
      bottleGlow.classList.add(cls);
      verseBox.classList.add(cls);

      // set glow background color from computed CSS variable of mood class
      // we use a small mapping to actual colors for better control
      const colorMap = {
        "mood-heureux":"#FFD966",
        "mood-triste":"#6FA8DC",
        "mood-stresse":"#C27BA0",
        "mood-anxieux":"#9FC5E8",
        "mood-motive":"#93C47D",
        "mood-perdu":"#B4A7D6",
        "mood-reconnaissant":"#F9CB9C",
        "mood-colere":"#F28B82",
        "mood-fatigue":"#B7B7FF",
        "mood-humble":"#DDEBF7"
      };
      const color = colorMap[cls] || '#93C47D';
      bottleGlow.style.background = `radial-gradient(circle at 50% 40%, ${color}55 0%, ${color}22 30%, transparent 60%)`;
      bottleGlow.classList.add('active');
    }

    // animate bottle + sparkle
    function animateBottle(){
      bottleImg.classList.add('open');
      sparkleEl.style.display = 'block';
      // restart sparkle animation
      sparkleEl.style.animation = 'none';
      void sparkleEl.offsetWidth;
      sparkleEl.style.animation = '';
      setTimeout(()=> {
        bottleImg.classList.remove('open');
        sparkleEl.style.display = 'none';
      }, 700);
    }

    // main showVerse function
    function showVerse(){
      const mood = resolveMood();
      const verse = pickVerse(mood);

      // update title and content
      moodTitle.innerHTML = `<span style="font-size:20px;margin-right:8px">✨</span>Humeur: ${mood}`;
      refEl.textContent = verse.ref;
      arabicEl.textContent = verse.arabic;
      summaryEl.textContent = verse.summary;

      // visuals
      applyMoodVisuals(mood);
      animateBottle();

      // reveal verse box after a short delay (to sync with animation)
      verseBox.hidden = true;
      setTimeout(()=> verseBox.hidden = false, 380);
    }

    // event listeners
    showBtn.addEventListener('click', showVerse);
    moodSelect.addEventListener('change', showVerse);

    // allow clicking the bottle itself
    fioleWrap.addEventListener('click', showVerse);
    fioleWrap.addEventListener('keydown', (e) => { if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); showVerse(); } });

    // accessibility: hide glow from assistive tech
    bottleGlow.setAttribute('aria-hidden','true');
  </script>
</body>
</html>
